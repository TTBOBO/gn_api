<?phpfunction echoArr($arr) {	echo "<pre>";	print_r ( $arr );	echo "</pre>";}function checkMobileNum($mobile){	$flag=(preg_match("/^1\d{10}$/",$mobile))?$mobile:-1;	return $flag;}function checkEmail($email){	$flag=(filter_var($email, FILTER_VALIDATE_EMAIL))?$email:-1;	return $flag;}function checkPwd($pwd){	$flag=(strlen($pwd)==32)?$pwd:-1;	return $flag;}function filterHTMLCode($str,$url=""){	$str=preg_replace("/<(object.*?)>(.*?)<(\/object.*?)>/si","",$str); //过滤object标签	$str=preg_replace("/<(\/?objec.*?)>/si","",$str); //过滤object标签	$str=preg_replace("/<(param.*?)>(.*?)<(\/param.*?)>/si","",$str); //过滤param标签	$str=preg_replace("/<(\/?param.*?)>/si","",$str); //过滤param标签	$str=preg_replace("/<(embed.*?)>(.*?)<(\/embed.*?)>/si","",$str); //过滤embed标签	$str=preg_replace("/<(\/?embed.*?)>/si","",$str); //过滤embed标签	$str=preg_replace("/<(a.*?)>(.*?)<(\/a.*?)>/si","",$str); //过滤a标签	$str=preg_replace("/<(\/?a.*?)>/si","",$str); //过滤a标签	$str=preg_replace("/\"\/Dedecms\//si",$url,$str);// s代表匹配多行  i忽略大小写    $str=preg_replace("/g\"/si","g",$str);    $str=preg_replace("/style/i","data-preview-src=\"\" data-preview-group=\"1\" style",$str); //添加图片浏览属性	return $str;}function filterValue($value, $default, $isNum = false,$maxFlag=false) {	if (! isset ( $value )) {		$value = $default;	}	if (empty ( $value ) && $value!=0) {		$value = $default;	}	if ($isNum) {		$value = (is_numeric ( $value )) ? $value : $default;		if($maxFlag){			$value = ($value>=$default) ? $default : $value;		}		$value = (int) $value;	}	return $value;}function handlerChineseStr($str) {	return urldecode ( $str );}function handlerImgUrl($dataList, $key = "litpic" ,$dimension="1") {	//$emptyPointAlphaImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0RTkzQkJCOUY1QUMxMUU1Qjc3NkY1MDk1QjgwOTA3NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0RTkzQkJCQUY1QUMxMUU1Qjc3NkY1MDk1QjgwOTA3NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRFOTNCQkI3RjVBQzExRTVCNzc2RjUwOTVCODA5MDc1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRFOTNCQkI4RjVBQzExRTVCNzc2RjUwOTVCODA5MDc1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+pv8agAAAABBJREFUeNpi+P//PwNAgAEACPwC/tuiTRYAAAAASUVORK5CYII=";	$emptyPointAlphaImg="";	$path = 'http://'.$_SERVER['SERVER_NAME'].':'.$_SERVER["SERVER_PORT"];	if (! is_array ( $dataList )) {		if (! empty ( $dataList ) ) {			if(substr($dataList,0,7)!="http://"){				$dataList = $path . $dataList;			}		}		else{			$dataList=$emptyPointAlphaImg;		}	} else {		if($dimension=="1"){			foreach ( $dataList as $k => $v ) {				if ($k==$key ) {					if(!empty($v)){						if(substr($v,0,7)!="http://"){							$dataList [$k] = $path . $dataList  [$k];						}					}					else{						$dataList [$k]=$emptyPointAlphaImg;					}				}			}		}		else{		foreach ( $dataList as $k => $v ) {				if (! empty ( $dataList [$k] [$key] ) ) {					if(substr($dataList [$k] [$key],0,7)!="http://"){                        $dataList [$k] [$key] = $path . $dataList [$k] [$key];                    }				}				else{					$dataList [$k] [$key] =$emptyPointAlphaImg;				}			}		}	}	return $dataList;}function ImgUrla($dataList, $key = "imgurls" ,$dimension="1") {    $path = "http://" . $_SERVER ["SERVER_NAME"];    foreach ($dataList as $k=>$v){        //var_dump($dataList[$k][$key]);            $dataList[$k][$key] = preg_replace("/{[^{}]+}/","",$dataList[$k][$key]);//        /Dedecms/uploads        $dataList[$k][$key] = preg_replace("/\/Dedecms\/uploads/","",$dataList[$k][$key]);//        var_dump($dataList[$k][$key]);            $dataList[$k][$key]= trim($dataList[$k][$key]);            if(strlen($dataList[$k][$key]) != 0){                $dataList[$k][$key] = preg_split("/[\s,]+/",$dataList[$k][$key]);                    foreach ($dataList[$k][$key] as $k1=>$v1){                        $dataList[$k][$key] [$k1] = $path.$dataList[$k][$key][$k1];                    }            }           // print_r($dataList);        /*if($k == $key){            echo "<br/><br/><br/><br/><br/>";            $v = preg_replace("/{[^{}]+}/","",$v);            $v = trim($v);            $v = preg_split("/[\s,]+/",$v);            foreach ($v as $k1=>$v1){                $v [$k1] = $path.$v[$k1];            }           $dataList["imgurls"] = $v;        }*/    }   return $dataList;}function ImgUrl($dataList, $key = "imgurls" ,$dimension="1") {    $path = "http://" . $_SERVER ["SERVER_NAME"];    foreach ($dataList as $k=>$v){        if($k == $key){            $v = preg_replace("/{[^{}]+}/","",$v);            $v = trim($v);            $v = preg_split("/[\s,]+/",$v);            foreach ($v as $k1=>$v1){                $v [$k1] = $path.$v[$k1];            }            $dataList["imgurls"] = $v;        }    }    return $dataList;}function releaseImg($dataList, $key = "imgurls"){    $path = "http://" . $_SERVER ["SERVER_NAME"];    foreach ( $dataList as $k=>$v){        $v = rtrim($dataList[$k][$key],",");		$v = preg_replace("/\/Dedecms\/uploads/","",$v);        $v = preg_split("/[\s,]+/",$v);        foreach ($v as $k1=>$v1){            $v [$k1] = $path.$v[$k1];        }        $dataList[$k][$key] = $v;    }    return $dataList;	}//处理删除动态同时删除本地图片function unlinkImg($imgurl){    $path = "..";    $imgurl = rtrim($imgurl,",");//    $imgurl = preg_split("/[\s,]+/",$imgurl);    $imgurl = preg_replace("/\/Dedecms\/uploads/","..","$imgurl");    $imgurl = preg_split("/,/",$imgurl);    return $imgurl;}function getIP() {	if (isset ( $_SERVER )) {		if (isset ( $_SERVER ['HTTP_X_FORWARDED_FOR'] )) {			$realip = $_SERVER ['HTTP_X_FORWARDED_FOR'];		} elseif (isset ( $_SERVER ['HTTP_CLIENT_IP'] )) {			$realip = $_SERVER ['HTTP_CLIENT_IP'];		} else {			$realip = $_SERVER ['REMOTE_ADDR'];		}	} else {		if (getenv ( "HTTP_X_FORWARDED_FOR" )) {			$realip = getenv ( "HTTP_X_FORWARDED_FOR" );		} elseif (getenv ( "HTTP_CLIENT_IP" )) {			$realip = getenv ( "HTTP_CLIENT_IP" );		} else {			$realip = getenv ( "REMOTE_ADDR" );		}	}	return $realip;}function getRandomNum($length = 6 , $numeric = 0) {	PHP_VERSION < '4.2.0' && mt_srand((double)microtime() * 1000000);	if($numeric) {		$hash = sprintf('%0'.$length.'d', mt_rand(0, pow(10, $length) - 1));	} else {		$hash = '';		$chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789abcdefghjkmnpqrstuvwxyz';		$max = strlen($chars) - 1;		for($i = 0; $i < $length; $i++) {			$hash .= $chars[mt_rand(0, $max)];		}	}	return $hash;}function xml_to_array($xml){	$reg = "/<(\w+)[^>]*>([\\x00-\\xFF]*)<\\/\\1>/";	if(preg_match_all($reg, $xml, $matches)){		$count = count($matches[0]);		for($i = 0; $i < $count; $i++){			$subxml= $matches[2][$i];			$key = $matches[1][$i];			if(preg_match( $reg, $subxml )){				$arr[$key] = xml_to_array( $subxml );			}else{				$arr[$key] = $subxml;			}		}	}	return $arr;}function postData($curlPost,$url){	$curl = curl_init();	curl_setopt($curl, CURLOPT_URL, $url);	curl_setopt($curl, CURLOPT_HEADER, false);	curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);	curl_setopt($curl, CURLOPT_NOBODY, true);	curl_setopt($curl, CURLOPT_POST, true);	curl_setopt($curl, CURLOPT_POSTFIELDS, $curlPost);	$return_str = curl_exec($curl);	curl_close($curl);	return $return_str;}